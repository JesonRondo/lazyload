/*! vpop - v1.0.0 - LongZhou <pancnlz@gmail.com> 2013-11-27 */!function(a,b,c){a.fn.lazyload=function(d){function e(a,b){this.stamp=+new Date+Math.random()>>>0,this.settings={IMG_DATA_SRC:"data-src"},this.imgArr=[],this.areaArr=[],this.$els=a,this.callback=b&&"function"==typeof b?b:null,this._filterItems()}return e.prototype._getTargetY=function(a){var b=a.offsetTop;if(a.offsetParent)for(;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype._filterImgs=function(){var b,c,d=this.callback,e=d?!0:!1;c=this.settings.IMG_DATA_SRC,b=this.$els.filter("img").filter("["+c+"]"),b.each(a.proxy(function(b,f){var g=a(f),h=g.attr(c);h&&(g.css("opacity",0),f.onload=function(){a(this).animate({opacity:1},300,function(){e&&d()})},this.imgArr.push(f),g.targetY=this._getTargetY(g[0]))},this))},e.prototype._filterAreas=function(){var b=this.$els.filter("textarea");b.each(a.proxy(function(b,c){var d=a(c);this.areaArr.push(c),d.targetY=this._getTargetY(d[0])},this))},e.prototype._filterItems=function(){this._filterImgs(),this._filterAreas()},e.prototype._checkBounding=function(a){var d,e,f;return d=b.body.scrollTop||b.documentElement.scrollTop||c.pageYOffset||0,e=c.innerHeight||b.documentElement.clientHeight,f=a.targetY?a.targetY:this._getTargetY(a[0]),Math.abs(f-d)<e?!0:!1},function(a,b,c,d){var f=new e(a,b);c(d).on("scroll.lz"+f.stamp+" resize.lz"+f.stamp,function(){var a,b,e;for(f.imgArr.length<=0&&f.areaArr.length<=0&&(c(d).off("scroll.lz"+f.stamp),c(d).off("resize.lz"+f.stamp)),a=0,b=f.imgArr.length;b>a;)if(e=f.imgArr[a]){var g=c(e);f._checkBounding(g)?(g.attr("src",g.attr(f.settings.IMG_DATA_SRC)).attr(f.settings.IMG_DATA_SRC,""),f.imgArr.splice(a,1),b--):a++}for(a=0,b=f.areaArr.length;b>a;)if(e=f.areaArr[a]){var h=c(e);if(f._checkBounding(h)){h.hide();var i=c("<div>").html(h.val());i.insertBefore(h),h.remove(),f.areaArr.splice(a,1),b--}else a++}}).trigger("scroll.lz"+f.stamp)}(a(this),d,a,c),this}}(jQuery,document,window);