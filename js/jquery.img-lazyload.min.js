/*! vpop - v1.0.0 - LongZhou <pancnlz@gmail.com> 2013-11-27 */var MOGU=MOGU||{};!function(a,b,c,d){function e(a,b){this.stamp=+new Date+Math.random()>>>0,this.imgArr=[],this.$els=a,this.callback=b&&"function"==typeof b?b:null,this._filterItems()}var f={cls:"img-lazyload",dsrc:"d-src"};e.prototype._getTargetY=function(a){var b=a.offsetTop;if(a.offsetParent){a=a.offsetParent;do b+=a.offsetTop,a=a.offsetParent;while(a)}return b},e.prototype._filterImgs=function(){var a,c,d=this.callback,e=d?!0:!1;c=f.dsrc,a=this.$els.filter("img").filter("["+c+"]"),a.each(b.proxy(function(a,f){var g=b(f),h=g.attr(c);h&&(g.css("opacity",0),f.onload=function(){b(this).animate({opacity:1},300,function(){e&&d(g)})},this.imgArr.push(f),g.targetY=this._getTargetY(g[0]))},this))},e.prototype._filterItems=function(){this._filterImgs()},e.prototype._checkBounding=function(a){var b,e,f;return b=c.body.scrollTop||c.documentElement.scrollTop||d.pageYOffset||0,e=d.innerHeight||c.documentElement.clientHeight,f=a.targetY?a.targetY:this._getTargetY(a[0]),Math.abs(f-b)<e?!0:!1},a.lazyload=function(a,c){var g=new e(b(a),c);b(d).on("scroll.lz"+g.stamp+" resize.lz"+g.stamp,function(){var a,c,e;for(g.imgArr.length<=0&&(b(d).off("scroll.lz"+g.stamp),b(d).off("resize.lz"+g.stamp)),a=0,c=g.imgArr.length;c>a;)if(g.imgArr[a]){e=g.imgArr[a];var h=b(e);g._checkBounding(h)?(h.attr("src",h.attr(f.dsrc)).attr(f.dsrc,""),g.imgArr.splice(a,1),c--):a++}}).trigger("scroll.lz"+g.stamp)},b(c).ready(function(){a.lazyload("."+f.cls)})}(MOGU,jQuery,document,window);